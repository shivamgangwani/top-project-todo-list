/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),c=n.n(i)()(r());c.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Raleway&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap);"]),c.push([t.id,"* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Raleway';\n    font-weight: 300;\n    font-size: 1.1rem;\n}\n\nh1 {\n    font-size: 3rem;\n}\n\n#content {\n    height: 100vh;\n    display: grid;\n    grid-template-columns: 20vw 80vw;\n}\n\n/* <Sidebar> */\n#sidebar {\n    padding-top: 1rem;\n    background-color: #FFB000;\n    color: white;\n}\n\n#sidebar h1 {\n    text-align: center;\n}\n\n#projects {\n    display: flex;\n    flex-direction: column-reverse;\n    padding: 2rem 0.5rem;\n    position: sticky;\n    top: 0;\n}\n\n#projects button {\n    padding: 0.75rem 1rem;\n    outline: none;\n    border: 0;\n    background-color: #F5F5DC;\n    border-radius: 12px;\n    color: black;\n    transition: 0.1s;\n    margin-top: 1rem;\n}\n\n.project-button {\n    display: flex;\n    justify-content: space-between;\n}\n\n#projects > button.project-button.project-complete .project-button-title-text {\n    text-decoration: line-through;\n}\n\n#projects > button.project-button.project-complete {\n    background-color: #004225;\n    color: white;\n}\n\n.project-button button:first-child {\n    flex-grow: 1;\n}\n\n#projects button:hover {\n    background-color: #FFCF9D;\n}\n\nbutton.project-button-delete {\n    padding: 0;\n}\n\n.project-button-progress {\n    background-color: #141414;\n    color: white;\n    padding: 0.35rem 0.6rem;\n    margin-right: 0.3rem;\n    border-radius: 24px;\n    text-align: center;\n    font-size: 0.85rem;\n}\n\n.project-delete-trash-icon {\n    height: 24px;\n    width: auto;\n}\n\n.project-complete .project-delete-trash-icon {\n    filter: invert();\n}\n/* </Sidebar> */\n\n/* <ContentDisplay> */\n#content-display {\n    padding: 1rem 2rem;\n}\n\n#content-display-body {\n    padding-top: 3rem;\n}\n\n#todo-container {\n    display: flex;\n    flex-direction: column-reverse;\n}\n\n#todo-container > div {\n    background-color: #F5F5DC;\n    margin-top: 1rem;\n    padding: 1rem 2rem;\n    border-radius: 12px;\n}\n\n.todo-container {\n    display: grid;\n    grid-template-columns: 10% 90%;\n    gap: 1rem;\n}\n\n.todo-container.item-done {\n    filter: grayscale();\n    opacity: 0.25;\n}\n\n.todo-info {\n    display: flex;\n    justify-content: space-between;\n}\n\n.todo-info-right {\n    display: flex;\n    flex-direction: column;\n}\n\n.todo-info-right > button {\n    width: 100%;\n    padding: 0.5rem 1.2rem;\n    margin-bottom: 0.5rem;\n    border: 0;\n    border-radius: 6px;\n}\n\n.todo-action-item {\n    border: 0;\n    padding: 0.5rem 1.25rem;\n    margin-top: 0.75rem;\n    margin-right: 1rem;\n    background-color: #004225;\n    color: white;\n    border-radius: 12px;\n}\n\n.todo-info-item:first-child .todo-info-item-value {\n    font-size: 1.5rem;\n    text-decoration: underline;\n}\n\n.todo-done-check {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.todo-done-check-img {\n    width: 60%;\n    height: auto;\n}\n\n#todo-add-new {\n    display: flex;\n    align-items: center;\n}\n\n#add-icon {\n    color: white;\n    background-color: green;\n    border-radius: 48px;\n    font-size: 2rem;\n    padding: 0rem 2rem;\n}\n\n#add-icon-text {\n    margin-left: 1rem;\n}\n\n.todo-edit-form > .input-container:not(:last-child) {\n    margin-bottom: 1.2rem;\n}\n\n.input-container input{\n    border: 0;\n    padding: 0.25rem;\n}\n\n.input-container input[type='text'], .input-container input[type='date'] {\n    display: block;\n    border-radius: 6px;\n}\n\n.priority-low {\n    background-color: teal;\n    color: white;\n}\n\n.priority-medium {\n    background-color: orange;\n    color: white;\n}\n\n.priority-high {\n    background-color: firebrick;\n    color: white;\n}\n\n.todo-info-due-date {\n    background: #141414;\n    color: white;\n}\n\n.todo-edit-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.todo-edit-actions > input {\n    border: 0;\n    background-color: #141414;\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n}",""]);const a=c},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(o)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(c[s]=!0)}for(var d=0;d<t.length;d++){var u=[].concat(t[d]);o&&c[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},c=[],a=0;a<t.length;a++){var s=t[a],d=o.base?s[0]+o.base:s[0],u=i[d]||0,p="".concat(d," ").concat(u);i[d]=u+1;var l=n(p),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==l)e[l].references++,e[l].updater(h);else{var f=r(h,o);o.byIndex=a,e.splice(a,0,{identifier:p,updater:f,references:1})}c.push(p)}return c}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var c=0;c<i.length;c++){var a=n(i[c]);e[a].references--}for(var s=o(t,r),d=0;d<i.length;d++){var u=n(i[d]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=s}}},569:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var o=e.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&!t;)t=o[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0,(()=>{function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function o(n){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?e(Object(r),!0).forEach((function(e){t(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var c=function(t,e,n){for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e&&!1===e.call(n,t[o],o,t))return;return t},a=function(t,e,n){for(var o=n._pubsub_topics,i=o[t]?r(o[t]):[],c=0,a=i.length;c<a;c+=1){var s=i[c].token,d=i[c];if(n._options.immediateExceptions)d.callback(e,{name:t,token:s});else try{d.callback(e,{name:t,token:s})}catch(t){setTimeout((function(){throw t}),0)}!0===d.once&&n.unsubscribe(s)}},s=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.length<=1?n[0]:[].concat(n)},d=function(t,e,n,o){return!!t._pubsub_topics[e]&&(o?a(e,n,t):setTimeout((function(){a(e,n,t)}),0),!0)},u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pubsub_topics={},this._pubsub_uid=-1,this._options=o(o({},{immediateExceptions:!1}),e)}var e;return(e=[{key:"subscribe",value:function(t,e,n){var o=this._pubsub_topics,r=this._pubsub_uid+=1,i={};if("function"!=typeof e)throw new TypeError("When subscribing for an event, a callback function must be defined.");return o[t]||(o[t]=[]),i.token=r,i.callback=e,i.once=!!n,o[t].push(i),r}},{key:"subscribeOnce",value:function(t,e){return this.subscribe(t,e,!0)}},{key:"publish",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return d(this,t,s.apply(void 0,[t].concat(n)),!1)}},{key:"publishSync",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return d(this,t,s.apply(void 0,[t].concat(n)),!0)}},{key:"unsubscribe",value:function(t){var e=this._pubsub_topics,n=!1;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]){for(var r=e[o].length;r;){if(r-=1,e[o][r].token===t)return e[o].splice(r,1),0===e[o].length&&delete e[o],t;o===t&&(e[o].splice(r,1),0===e[o].length&&delete e[o],n=!0)}if(!0===n)return t}return!1}},{key:"unsubscribeAll",value:function(){return this._pubsub_topics={},this}},{key:"hasSubscribers",value:function(t){var e=this._pubsub_topics,n=!1;return null==t?(c(e,(function(t,e){if(e)return n=!0,!1})),n):Object.prototype.hasOwnProperty.call(e,t)}},{key:"subscribers",value:function(){var t={};return c(this._pubsub_topics,(function(e,n){t[n]=r(e)})),t}},{key:"subscribersByTopic",value:function(t){return this._pubsub_topics[t]?r(this._pubsub_topics[t]):[]}},{key:"alias",value:function(e){var n=this;return c(e,(function(o,r){var i,c;t.prototype[r]&&(t.prototype[e[r]]=(i=r,c=n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c[i].apply(c,e)}))})),this}}])&&function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(t.prototype,e),t}();u.createInstance=function(t){return new u(t)};const p=new u;class l{static entityCount=0;constructor(t,e){this.title=t,this.description=e,this.id=l.entityCount++}setTitle(t){this.title=t}setDescription(t){this.description=t}}function h(t,e="",n=[],o=""){const r=document.createElement(t);return e&&(r.id=e),n.length>0&&r.classList.add(...n),o&&(r.textContent=o),r}function f(t,e){let n=null;for(;!n;){if(n=prompt(t),null===n)return;n.length>20&&(n=null)}let o=null;for(;!o;)if(o=prompt(e),null===o)return;return{name:n,description:o}}const b=n.p+"24032ffbf3274f765eb4a97259a3240e.png",m=n.p+"ecc2a709588b07fc9de45720b741048c.png",g=n.p+"089321841fb701cd043f9c7fb2bffa22.png";function y(t,e,n="",o="",r="",i=-1,c=!1){let a=h("input");return a.setAttribute("form",t),a.setAttribute("type",e),a.setAttribute("name",n),a.setAttribute("value",o),a.setAttribute("placeholder",r),-1!==i&&a.setAttribute("maxlength",i),c&&a.setAttribute("checked",!0),a}function v(t,e){const n=[j("Low",y(e,"radio","priority","Low","",-1,"Low"===t.priority),!0),j("Medium",y(e,"radio","priority","Medium","",-1,"Medium"===t.priority),!0),j("High",y(e,"radio","priority","High","",-1,"High"===t.priority),!0)],o=h("div");return o.append(...n),o}function j(t,e,n=!1){const o=h("div","",["input-container"]),r=h("label","",[],t);return n?o.append(e,r):o.append(r,e),o}class D extends l{constructor(t,e){super(t,e),this.todos=[]}addToDo(t){return this.todos.push(t),p.publish("todo_add_to_project",{todo:t,project:this}),t}deleteToDo(t){this.todos.splice(this.todos.indexOf(t),1),p.publish("todo_remove_from_project",{todo:t,project:this})}viewToDos(){for(const[t,e]of Object.entries(this.todos))console.log(`${t} - ${e.title} - ${e.description} - DONE: ${e.done} - DUE AT: ${e.due_at} - PRIORITY : ${e.priority}`)}getPendingToDos(){return this.todos.filter((t=>!t.done))}getPendingToDosCount(){return this.getPendingToDos().length}}class w extends l{constructor(t,e){super(t,e),this.due_at=null,this.priority="Low",this.done=!1}setDueAt(t){this.due_at=t}setPriority(t){this.priority=t}setDoneState(t){this.done=t,p.publish("todo_done_state_change",{todo:this})}toggleDoneState(){this.setDoneState(!this.done)}}var E=n(379),_=n.n(E),T=n(795),x=n.n(T),O=n(569),S=n.n(O),k=n(565),A=n.n(k),P=n(216),M=n.n(P),B=n(589),L=n.n(B),N=n(426),C={};C.styleTagTransform=L(),C.setAttributes=A(),C.insert=S().bind(null,"head"),C.domAPI=x(),C.insertStyleElement=M(),_()(N.Z,C),N.Z&&N.Z.locals&&N.Z.locals,new class{static DOM_ELEMENTS;constructor(){this.projects=[],this.current_project=null,this.init(),null===this.getFromLocalStorage()?this.addDummyData():this.loadLocalStorage()}init(){this.DOM_ELEMENTS=function(){const t={};return t.content=document.querySelector("div#content"),t.sideBar=h("div","sidebar",[],""),t.projects=h("div","projects"),t.sideBar.append(h("h1","",[],"Projects"),t.projects),t.contentArea=h("div","content-display"),t.contentAreaHeader=h("h1","content-display-head",[],""),t.contentAreaBody=h("div","content-display-body"),t.contentArea.append(t.contentAreaHeader,t.contentAreaBody),t.content.append(t.sideBar,t.contentArea),t}();let t=h("button","add-new-project",[],"Add Project");t.addEventListener("click",(()=>this.addNewProject()));let e=h("button","add-dummy-project",[],"Add Dummy Project");e.addEventListener("click",(()=>this.addDummyData())),this.DOM_ELEMENTS.projects.append(t,e),p.subscribe("todo_add_to_project",(t=>this.refreshProjectButton(t.project))),p.subscribe("todo_remove_from_project",(t=>this.refreshProjectButton(t.project))),p.subscribe("todo_done_state_change",(t=>this.refreshProjectButton(this.getToDoProject(t.todo)))),p.subscribe("data_changed",(()=>this.saveToLocalStorage())),this.resetView()}addDummyData(){let t=this.addNewProject("Testing","12345");t.addToDo(new w("Test","123123123")),t.addToDo(new w("Test","123123123")),t.addToDo(new w("Test","123123123")),t.addToDo(new w("Test","123123123")),t.addToDo(new w("Test","123123123"))}addNewProject(t=null,e=null){if(null===t){let n=f("Enter project name (Max 20 characters): ","Enter project description: ");if(void 0===n)return;t=n.name,e=n.description}const n=new D(t,e);return this.projects.push(n),this.DOM_ELEMENTS.projects.appendChild(this.createAndBindEvents_ProjectButton(n)),p.publish("data_changed"),n}viewProject(t){this.DOM_ELEMENTS.contentAreaHeader.textContent=t.title,this.DOM_ELEMENTS.contentAreaBody.replaceChildren(h("p","",[],t.description)),this.renderProjectToDos(t),this.current_project=t,this.DOM_ELEMENTS.todoContainer=this.DOM_ELEMENTS.contentArea.querySelector("#todo-container")}deleteProject(t,e){return this.removeProjectButton(e.target),this.projects.splice(this.projects.indexOf(t),1),this.current_project===t&&this.resetView(),p.publish("data_changed"),e.stopPropagation(),t}createAndBindEvents_ProjectButton(t){const e=function(t){const e=t.todos.length,n=t.getPendingToDosCount(),o=e>0?`${n}`:"";let r=h("button","",["project-button"]);0===e?r.classList.add("project-empty"):0===n?r.classList.add("project-complete"):r.classList.add("project-incomplete"),r.setAttribute("data-index",t.id);let i=h("p","",["project-button-title"]);if(""!==o){let t=h("span","",["project-button-progress"],o);i.append(t)}let c=h("span","",["project-button-title-text"],t.title);i.append(c);let a=h("img","",["project-delete-trash-icon"],"");return a.src=g,r.append(i,a),{btn:r,trashBtn:a}}(t);return e.btn.addEventListener("click",(()=>this.viewProject(t))),e.trashBtn.addEventListener("click",(e=>this.deleteProject(t,e))),e.btn}renderProjectToDos(t){if(null===t)return;const e=h("div","todo-container"),n=function(){const t=h("div","todo-add-new",[],""),e=h("span","add-icon",[],"+"),n=h("span","add-icon-text",[],"Add New Item");return t.append(e,n),t}();return n.addEventListener("click",(()=>this.createToDo(t))),e.appendChild(n),t.todos.forEach((n=>e.appendChild(this.createToDoNode(n,t)))),this.DOM_ELEMENTS.contentAreaBody.append(e),e}removeProjectButton(t){t.parentElement.remove()}refreshProjectButton(t){const e=function(t){return document.querySelector(`.project-button[data-index='${t.id}']`)}(t);e.replaceWith(this.createAndBindEvents_ProjectButton(t))}createToDoNode(t){const e=function(t){let e=h("div","",["todo-container"]);e.setAttribute("data-index",t.id),t.done&&e.classList.add("item-done");const n=function(t){let e=h("div","",["todo-done-check"]);const n=h("img","",["todo-done-check-img"]);return n.src=t.done?m:b,e.appendChild(n),{btn:e,doneBtn:n}}(t);e.appendChild(n.btn);let o=h("div","",["todo-info"]);const r=function(t){let e=h("div","",["todo-info-left"]);const n={"":t.title,Description:t.description};for(const[t,o]of Object.entries(n)){let n=h("div","",["todo-info-item"]),r=h("span","",["todo-info-item-key"],t?`${t}: `:""),i=h("span","",["todo-info-item-value"],`${o}`);n.append(r,i),e.appendChild(n)}const o=h("button","",["todo-action-item"],"Edit Item"),r=h("button","",["todo-action-item"],"Delete Item");return e.append(o,r),{el:e,editBtn:o,deleteBtn:r}}(t),i=function(t){const e=h("div","",["todo-info-right"],"");let n=null,o=null;return t.priority&&(n=h("button","",["todo-info-priority"],`Priority: ${t.priority}`),n.classList.add(function(t){switch(t){case"High":return"priority-high";case"Low":return"priority-low";case"Medium":return"priority-medium"}}(t.priority)),e.append(n)),t.due_at&&(o=h("button","",["todo-info-due-date"],`Due: ${t.due_at}`),e.append(o)),{el:e,priorityBtn:n,dueBtn:o}}(t);return o.append(r.el,i.el),e.appendChild(o),{todoEl:e,doneBtn:n.doneBtn,editBtn:r.editBtn,deleteBtn:r.deleteBtn,dueBtn:i.dueBtn,priorityBtn:i.priorityBtn}}(t);return e.doneBtn.addEventListener("click",(e=>this.flipToDoDone(t,e))),e.deleteBtn.addEventListener("click",(e=>this.deleteToDo(t,e))),t.done||[e.editBtn,e.dueBtn,e.priorityBtn].forEach((e=>{e&&e.addEventListener("click",(e=>this.editToDo(t,e)))})),e.todoEl}createToDo(){let t=f("Enter title (Max 20 characters): ","Enter description: ");if(void 0===t)return;const e=new w(t.name,t.description);return this.current_project.addToDo(e),this.addToDoNodeToDOM(e),p.publish("data_changed"),e}editToDo(t,e){const n=e.target.parentElement.parentElement.parentElement,o=function(t){let e=h("form");const n=`form_todo_${t.id}`;e.setAttribute("id",n);let o=h("div","",["todo-container"]);o.setAttribute("data-index",t.id);const r=h("div","",["todo-edit-actions"]),i=y(n,"submit","submit","Submit"),c=y(n,"reset","reset","Cancel");r.append(i,c);const a=function(t,e){const n=h("div","",["todo-edit-form"],""),o={"":y(e,"text","title",t.title,"Title",20),"Description: ":y(e,"text","description",t.title,"Description"),"Due Date":y(e,"date","dueDate",t.due_at,"Due Date"),Priority:v(t,e)};for(const[t,e]of Object.entries(o)){const o=j(t,e);n.appendChild(o)}return n}(t,n);return o.append(r,a),{todoEl:o,form:e}}(t),r=o.todoEl;n.replaceWith(r);const i=o.form;this.DOM_ELEMENTS.contentAreaBody.appendChild(i),i.addEventListener("submit",(e=>{e.preventDefault(),this.saveToDo(t,r,i),p.publish("data_changed")})),i.addEventListener("reset",(e=>{e.preventDefault(),this.cancelEdit(t,r,i)}))}cancelEdit(t,e,n){this.refreshToDoDOMNode(t,e),n.remove()}saveToDo(t,e,n){const o=new FormData(n);t.title=o.get("title"),t.description=o.get("description"),o.get("dueDate")&&(t.due_at=o.get("dueDate")),o.get("priority")&&(t.priority=o.get("priority")),this.refreshToDoDOMNode(t,e),n.remove()}flipToDoDone(t,e){t.toggleDoneState();const n=e.target.parentElement.parentElement;p.publish("data_changed"),this.refreshToDoDOMNode(t,n)}deleteToDo(t,e){return e.target.parentElement.parentElement.parentElement.remove(),this.current_project.deleteToDo(t),p.publish("data_changed"),t}addToDoNodeToDOM(t){this.DOM_ELEMENTS.todoContainer.appendChild(this.createToDoNode(t))}refreshToDoDOMNode(t,e){e.replaceWith(this.createToDoNode(t))}getToDoProject(t){for(let e of this.projects)if(e.todos.includes(t))return e;return null}saveToLocalStorage(){localStorage.setItem("projects",JSON.stringify(this.projects))}getFromLocalStorage(){return localStorage.getItem("projects")}loadLocalStorage(){const t=JSON.parse(this.getFromLocalStorage());for(let e of t){let t=this.addNewProject(e.title,e.description);for(let n of e.todos){let e=new w(n.title,n.description);t.addToDo(e),e.due_at=n.due_at,e.priority=n.priority,e.done=n.done}}}resetView(){this.DOM_ELEMENTS.contentAreaHeader.textContent="Hey there!",this.DOM_ELEMENTS.contentAreaBody.innerHTML="",this.DOM_ELEMENTS.contentAreaBody.textContent="No project chosen.",this.current_project=null}}})()})();